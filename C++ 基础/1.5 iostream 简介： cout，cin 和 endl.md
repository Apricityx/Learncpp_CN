本节将重点介绍 `std::cout`。我们在 _Hello world!_ 程序中已经使用它向控制台输出过文本 _Hello world!_ 。我们还将介绍如何从用户获取输入，使程序具备与用户交互的能力。

## 输入输出库

输入输出库 (io 库) 是 C++ 标准库的一部分，用于处理基本的输入和输出。我们会使用该库提供的功能从键盘获取输入并向控制台输出数据。_iostream_ 中的io 指代的是输入输出（_input/output_）。

为了使用 _iostream_ 库提供的功能，我们需要在任何需要使用该库的源文件的顶部包含 _iostream_ 的头文件，像下面这样：

```cpp
#include <iostream>

// rest of code that uses iostream functionality here
```


## std::cout

_iostream_ 库中包含了一些预定义的变量供我们使用，其中最有用的当属 `std::cout`，通过它可以向控制台打印文本，`cout` 代表的含义就是字符输出（character output）。

提醒一下，下面既是之前的 _Hello world_ 程序：

```cpp
#include <iostream> // for std::cout

int main()
{
    std::cout << "Hello world!"; // print Hello world! to console

    return 0;
}
```

在这个程序中，_iostream_ 已经被包含了，因此我们可以访问 `_std::cout_`。在主函数中，我们使用了` _std::cout_`，并配合插入运算符（`<<`）将文本 Hello world!发送到控制台并打印出来。

`_std::cout_` 不仅可以打印文本，还可以打印数字：

```cpp
#include <iostream> // for std::cout

int main()
{
    std::cout << 4; // print 4 to console

    return 0;
}
```

输出结果：

```
4
```

它还可以用来打印变量的值：

```cpp
#include <iostream> // for std::cout

int main()
{
    int x{ 5 }; // define integer variable x, initialized with value 5
    std::cout << x; // print value of x (5) to console
    return 0;
}
```

输出结果：

```
5
```

为了在一行中打印多个内容，可以多次使用插入操作符将多个要输出的内容连接起来并输出，例如：

```cpp
#include <iostream> // for std::cout

int main()
{
    std::cout << "Hello" << " world!";
    return 0;
}
```

输出结果：

```
Hello world!
```

另外一个例子如下，在这个例子中，我们在一条语句中同时打印了文本和变量值：

```cpp
#include <iostream> // for std::cout

int main()
{
    int x{ 5 };
    std::cout << "x is equal to: " << x;
    return 0;
}
```

输出结果：

```
x is equal to: 5
```

>[!INFO] 相关内容
> 我们会在[[2.9 名称冲突和命名空间简介]] 讨论 `std::`前缀的作用

## std::endl

你觉得下面的代码打印的结果是什么呢？

```cpp
#include <iostream> // for std::cout

int main()
{
    std::cout << "Hi!";
    std::cout << "My name is Alex.";
    return 0;
}
```

看到下面的结果你会觉得吃惊吗：

```
Hi!My name is Alex.
```

显然，将一条语句拆分为两行，并不会产生不同的结果。

如果我们希望分行打印，则必须要告知控制台将光标移动到下一行。

一种方式是使用 `std::endl`。当使用 `std::cout`  进行输出时，`std::endl`会打印一个换行符（促使光标被移动到下一行的开头）。因此，`endl` 表示的是结束该行（end line）。

例程：

```cpp
#include <iostream> // for std::cout and std::endl

int main()
{
    std::cout << "Hi!" << std::endl; // std::endl will cause the cursor to move to the next line of the console
    std::cout << "My name is Alex." << std::endl;

    return 0;
}
```

输出结果：

```
Hi!
My name is Alex.
```

>[!TIP]  小贴士
> 在上面的程序中，第二个 `std::endl` 从技术上讲并无必要，因为在执行完这行代码后程序会立即停止。不过，这么做其实还有两个有用的目的：首先，它可以表明该行的内容已经被”完整输出“ （与之相对的是部分输出，即后续代码中还有需要输出的部分）。其次，如果将来我们在后面添加其他额外的输出，就不需要修改已有的代码了。因此不妨加上它。

## std::endl vs ‘\n’

使用 `std::endl` 换行的效率稍微有点低，因为它通常需要完成两件事：将光标移动到下一行，然后确保输出结果马上显示在屏幕上（称为刷新输出）。当使用 `std::cout` 进行输出时，`std::cout` 本来就会刷新输出（即使没有刷新，通常也不会产生什么问题）。因此，使用 `std::endl` 来刷新输出就有些多余了。

因此，使用换行字符(`\n`)一般来讲是更好的选择。‘\n’ 符号会将光标移动到下一行，但是它并不会请求刷新，因此在无需特别刷新时可以获得更好的性能。‘\n’ 字符还更易读，因为它不仅更简洁，而且还可以嵌入在已有的文本中。

下面的例子中展现了使用 ‘\n’ 的两种不同方式：

```cpp
#include <iostream> // for std::cout

int main()
{
    int x{ 5 };
    std::cout << "x is equal to: " << x << '\n'; // Using '\n' standalone
    std::cout << "And that's all, folks!\n"; // Using '\n' embedded into a double-quoted piece of text (note: no single quotes when used this way)
    return 0;
}
```


输出结果：
```
x is equal to: 5
And that's all, folks!
```


注意，在单独使用换行符 ‘\n’ 的时候，单引号是必须的。当嵌入在其他已经被双引号包裹的文本中时，则无需再使用单引号。

我们会在后续的课程中更详细的介绍换行符 ‘\n’ [[4.11 -- Chars]]。

>[!TIP] 最佳实践
> 在输出时优先使用 ‘\n’ 而不是 `std::endl` 

>[!Warning]  警告
> ‘\n’ 使用的是反斜杠（和其他特殊字符一样），而不是斜杠。使用斜杠（例如 ''）uses a backslash (as do all special characters in C++), not a forward slash. Using a forward slash (e.g. ‘/n’) instead may result in unexpected behavior.

## std::cin

`std::cin` is another predefined variable that is defined in the `iostream` library. Whereas `std::cout` prints data to the console using the insertion operator (`<<`), `std::cin` (which stands for “character input”) reads input from keyboard using the extraction operator (`>>`). The input must be stored in a variable to be used.

```cpp
#include <iostream>  // for std::cout and std::cin

int main()
{
    std::cout << "Enter a number: "; // ask user for a number

    int x{ }; // define variable x to hold user input (and zero-initialize it)
    std::cin >> x; // get number from keyboard and store it in variable x

    std::cout << "You entered " << x << '\n';
    return 0;
}
```


Try compiling this program and running it for yourself. When you run the program, line 5 will print “Enter a number: “. When the code gets to line 8, your program will wait for you to enter input. Once you enter a number (and press enter), the number you enter will be assigned to variable _x_. Finally, on line 10, the program will print “You entered ” followed by the number you just entered.

For example (I entered 4):
```
Enter a number: 4
You entered 4
```


This is an easy way to get keyboard input from the user, and we will use it in many of our examples going forward. Note that you don’t need to use ‘\n’ when accepting input, as the user will need to press the _enter_ key to have their input accepted, and this will move the cursor to the next line.

If your screen closes immediately after entering a number, please see lesson [0.8 -- A few common C++ problems](https://www.learncpp.com/cpp-tutorial/a-few-common-cpp-problems/) for a solution.

Just like it is possible to output more than one bit of text in a single line, it is also possible to input more than one value on a single line:

```cpp
#include <iostream>  // for std::cout and std::cin

int main()
{
    std::cout << "Enter two numbers separated by a space: ";

    int x{ }; // define variable x to hold user input (and zero-initialize it)
    int y{ }; // define variable y to hold user input (and zero-initialize it)
    std::cin >> x >> y; // get two numbers and store in variable x and y respectively

    std::cout << "You entered " << x << " and " << y << '\n';

    return 0;
}
```


This produces the output:
```
Enter two numbers separated by a space: 5 6
You entered 5 and 6
```


>[!TIP] 最佳实践

There’s some debate over whether it’s necessary to initialize a variable immediately before you give it a user provided value via another source (e.g. std::cin), since the user-provided value will just overwrite the initialization value. In line with our previous recommendation that variables should always be initialized, best practice is to initialize the variable first.

We’ll discuss how _std::cin_ handles invalid input in a future lesson [[7.16 -- std::cin and handling invalid input]]

>[!INFO] For advanced readers

The C++ I/O library does not provide a way to accept keyboard input without the user having to press _enter_. If this is something you desire, you’ll have to use a third party library. For console applications, we’d recommend the [pdcurses](https://pdcurses.org/) library. Many graphical user libraries have their own functions to do this kind of thing.

## 小结

New programmers often mix up std::cin, std::cout, the insertion operator (`<<`) and the extraction operator (`>>`). Here’s an easy way to remember:

-   `std::cin` and `std::cout` always go on the left-hand side of the statement.
-   `std::cout` is used to output a value (cout = character output)
-   `std::cin` is used to get an input value (cin = character input)
-   `<<` is used with std::cout, and shows the direction that data is moving (if `std::cout` represents the console, the output data is moving from the variable to the console). `std::cout << 4` moves the value of 4 to the console
-   `>>` is used with `std::cin`, and shows the direction that data is moving (if std::cin represents the keyboard, the input data is moving from the keyboard to the variable). `std::cin >> x` moves the value the user entered from the keyboard into x

We’ll talk more about operators in lesson [1.9 -- Introduction to literals and operators](https://www.learncpp.com/cpp-tutorial/introduction-to-literals-and-operators/).