> [!INFO] 原文信息：
> - 链接：[2.1 — Introduction to functions](https://www.learncpp.com/cpp-tutorial/introduction-to-functions/)
> - 作者：[_ALEX_](https://www.learncpp.com/author/Alex/ "View all posts by Alex")  
> - 2021-12-23

# 2.1 函数简介
在上一章节中，我们将函数定义为一组顺序执行指令的合集。这个定义固然没错，但是它并没有表达出函数的重要性。 这里让我们重新定义函数：函数是一组为了完成某项任务而创建的可复用的顺序指令集合。

你已经知道了，任何都必须包含一个名为 `main` 的函数（程序开始执行的地方）。然而，如果将程序的所有代码都塞进`main`函数中，那么它无疑会变得越来越长，也越来越难以维护。而函数则提供了一种将程序分割成简短的、模块化的代码段的方式。这种方式的代码更加容易管理、容易测试，也更容易使用。C++ 标准库中包含了非常多的已经编写好的函数可供你使用。不过，使用自己编写的函数也是非常常见的情形，这些函数称为用户自定义函数。

我们可以考虑这样一种生活中的场景：当你在阅读的时候，突然想到要去打一个电话。此时你会将书签夹在书里，然后去打电话，然后在回到jia'leonsider a case that might occur in real life: you’re reading a book, when you remember you need to make a phone call. You put a bookmark in your book, make the phone call, and when you are done with the phone call, you return to the place you bookmarked and continue your book precisely where you left off.

C++ programs can work the same way. A program will be executing statements sequentially inside one function when it encounters a function call. A function call is an expression that tells the CPU to interrupt the current function and execute another function. The CPU “puts a bookmark” at the current point of execution, and then calls (executes) the function named in the function call. When the called function ends, the CPU returns back to the point it bookmarked, and resumes execution.

The function initiating the function call is called the caller, and the function being called is the callee or called function.

## An example of a user-defined function

First, let’s start with the most basic syntax to define a user-defined function. For the next few lessons, all user-defined functions will take the following form:

return-type identifier() // identifier replaced with the name of your function
{
// Your code here
}

Let’s quickly go over the 4 main elements of this:

-   In this lesson, we’ll use a _return-type_ of _int_ (for function _main()_) or _void_ (otherwise). We’ll talk more about return types and return values in the next lesson ([2.2 -- Function return values (value-returning functions)](https://www.learncpp.com/cpp-tutorial/function-return-values-value-returning-functions/)). For now, you can ignore these.
-   Just like variables have names, so do user-defined functions. The _identifier_ is the name of your user-defined function.
-   The parentheses after the identifier tell the compiler that we’re defining a function.
-   The curly braces and statements in between are called the function body. This is where the statements that are part of your function will go.

Here is a sample program that shows how a new function is defined and called:

```cpp
#include <iostream> // for std::cout

// Definition of user-defined function doPrint()
void doPrint() // doPrint() is the called function in this example
{
    std::cout << "In doPrint()\n";
}

// Definition of function main()
int main()
{
    std::cout << "Starting main()\n";
    doPrint(); // Interrupt main() by making a function call to doPrint().  main() is the caller.
    std::cout << "Ending main()\n"; // this statement is executed after doPrint() ends

    return 0;
}
```

COPY

This program produces the following output:

Starting main()
In doPrint()
Ending main()

This program begins execution at the top of function _main_, and the first line to be executed prints `Starting main()`.

The second line in _main_ is a function call to the function _doPrint_. We call function _doPrint_ by appending a pair of parentheses to the function name like such: `doPrint()`. Note that if you forget the parentheses, your program may not compile (and if it does, the function will not be called).

> [!Warning] 注意

Don’t forget to include parentheses () after the function’s name when making a function call.

Because a function call was made, execution of statements in _main_ is suspended, and execution jumps to the top of called function _doPrint_. The first (and only) line in _doPrint_ prints `In doPrint()`. When _doPrint_ terminates, execution returns back to the caller (here: function _main_) and resumes from the point where it left off. Consequently, the next statement executed in _main_ prints `Ending main()`.

Calling functions more than once

One useful thing about functions is that they can be called more than once. Here’s a program that demonstrates this:

```cpp
#include <iostream> // for std::cout

void doPrint()
{
    std::cout << "In doPrint()\n";
}

// Definition of function main()
int main()
{
    std::cout << "Starting main()\n";
    doPrint(); // doPrint() called for the first time
    doPrint(); // doPrint() called for the second time
    std::cout << "Ending main()\n";

    return 0;
}
```

COPY

This program produces the following output:

Starting main()
In doPrint()
In doPrint()
Ending main()

Since _doPrint_ gets called twice by _main_, _doPrint_ executes twice, and _In doPrint()_ gets printed twice (once for each call).

Functions calling functions calling functions

You’ve already seen that function _main_ can call another function (such as function _doPrint_ in the example above). Any function can call any other function. In the following program, function _main_ calls function _doA_, which calls function _doB_:

```cpp
#include <iostream> // for std::cout

void doB()
{
    std::cout << "In doB()\n";
}


void doA()
{
    std::cout << "Starting doA()\n";

    doB();

    std::cout << "Ending doA()\n";
}

// Definition of function main()
int main()
{
    std::cout << "Starting main()\n";

    doA();

    std::cout << "Ending main()\n";

    return 0;
}
```

COPY

This program produces the following output:

Starting main()
Starting doA()
In doB()
Ending doA()
Ending main()

Nested functions are not supported

Unlike some other programming languages, in C++, functions cannot be defined inside other functions. The following program is not legal:

```cpp
#include <iostream>

int main()
{
    void foo() // Illegal: this function is nested inside function main()
    {
        std::cout << "foo!\n";
    }

    foo(); // function call to foo()
    return 0;
}
```

COPY

The proper way to write the above program is:

```cpp
#include <iostream>

void foo() // no longer inside of main()
{
    std::cout << "foo!\n";
}

int main()
{
    foo();
    return 0;
}
```

COPY

As an aside…

“foo” is a meaningless word that is often used as a placeholder name for a function or variable when the name is unimportant to the demonstration of some concept. Such words are called [metasyntactic variables](https://en.wikipedia.org/wiki/Metasyntactic_variable) (though in common language they’re often called “placeholder names” since nobody can remember the term “metasyntactic variable”). Other common metasyntactic variables in C++ include “bar”, “baz”, and 3-letter words that end in “oo”, such as “goo”, “moo”, and “boo”).

For those interested in etymology (how words evolve), [RFC 3092](https://datatracker.ietf.org/doc/html/rfc3092) is an interesting read.