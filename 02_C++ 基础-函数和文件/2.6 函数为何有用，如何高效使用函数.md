> [!INFO] 原文信息：
> - 链接：[2.6 — Why functions are useful, and how to use them effectively](https://www.learncpp.com/cpp-tutorial/why-functions-are-useful-and-how-to-use-them-effectively/)
> - 作者：[_ALEX_](https://www.learncpp.com/author/Alex/ "View all posts by Alex")  
> - 2022-4-15

# 2.6 函数为何有用，如何高效使用函数

通过前面的学习，我们已经了解了什么是函数以及函数的基本功能，接下来，让我们看看，为什么说函数非常有用。

## 函数为什么有用

新手程序员总会问：“难道我们就不能把所有的代码都塞到 `main` 函数里面吗？” ，其实对于非常简单的程序，你的确可以将所有的代码都塞到 `main` 函数里面。但是，对于代码量比较多或复杂度较高的程序来说，使用函数能够带来很多好处：

- 便于组织代码 -- 随着程序的复杂性越来越高，将所有的代码都是塞到`main`函数中会使 `main` 函数变得非常复杂。我们可以将函数看做是一个个独立于主程序的迷你程序，在编写它们的时候我们无需考虑其他程序。这样，我们就可以将一个复杂的程序简化为多个更小、更易维护的段落，从而降低整个程序的复杂度。
- 提高可重用性 -- 当函数被编写后，它可以在程序中被多次调用。这么做可以避免重复代码 (“Don’t Repeat Yourself”原则)而且能够最大程度上减少复制粘贴代码所可能带来的错误。函数还可以在程序间共享，这么做可以避免重复编写（或测试）代码。 
- 便于测试代码 -- 因为函数可以减少代码的冗余度， functions reduce code redundancy, there’s less code to test in the first place. Also because functions are self-contained, once we’ve tested a function to ensure it works, we don’t need to test it again unless we change it. This reduces the amount of code we have to test at one time, making it much easier to find bugs (or avoid them in the first place).
- 提高可扩展性 -- When we need to extend our program to handle a case it didn’t handle before, functions allow us to make the change in one place and have that change take effect every time the function is called.
- 提高抽象程度 -- In order to use a function, you only need to know its name, inputs, outputs, and where it lives. You don’t need to know how it works, or what other code it’s dependent upon to use it. This lowers the amount of knowledge required to use other people’s code (including everything in the standard library).

Although it doesn’t look like it, every time you use operator<< or operator>> to do input or output, you’re using a function provided by the standard library that meets all of the above criteria.


**Effectively using functions**

One of the biggest challenges new programmers encounter (besides learning the language) is understanding when and how to use functions effectively. Here are a few basic guidelines for writing functions:

- Groups of statements that appear more than once in a program should generally be made into a function. For example, if we’re reading input from the user multiple times in the same way, that’s a great candidate for a function. If we output something in the same way in multiple places, that’s also a great candidate for a function.
- Code that has a well-defined set of inputs and outputs is a good candidate for a function, (particularly if it is complicated). For example, if we have a list of items that we want to sort, the code to do the sorting would make a great function, even if it’s only done once. The input is the unsorted list, and the output is the sorted list. Another good prospective function would be code that simulates the roll of a 6-sided dice. Your current program might only use that in one place, but if you turn it into a function, it’s ready to be reused if you later extend your program or in a future program.
- A function should generally perform one (and only one) task.
- When a function becomes too long, too complicated, or hard to understand, it can be split into multiple sub-functions. This is called refactoring. We talk more about refactoring in lesson [[3.10 -- Finding issues before they become problems]]

Typically, when learning C++, you will write a lot of programs that involve 3 subtasks:

1.  Reading inputs from the user
2.  Calculating a value from the inputs
3.  Printing the calculated value

For trivial programs (e.g. less than 20 lines of code), some or all of these can be done in function _main_. However, for longer programs (or just for practice) each of these is a good candidate for an individual function.

New programmers often combine calculating a value and printing the calculated value into a single function. However, this violates the “one task” rule of thumb for functions. A function that calculates a value should return the value to the caller and let the caller decide what to do with the calculated value (such as call another function to print the value).